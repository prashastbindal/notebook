<!doctype html>
<html>
<head>
    <title>NoteBook</title>
    {{> header}}

    <link href="/css/note-preview.css" rel="stylesheet">
    <script src="/js/validateComment.js"></script>
    <script src="/js/validateUpvote.js"></script>
    <script src="/js/setReplyId.js"></script>
    <script>
        gapi.load('auth2', function() {
            gapi.auth2.init();
        });
    </script>
</head>
<body>
<main>

    <div class="row mx-auto">
        <h2>{{ courseName }} - {{ noteName }}</h2>
    </div>
    <div class="row mx-auto">
    <h4>Made by {{ creatorName }} on {{dateCreated}}</h4>
    </div>
    <meta property="og:url"           content="http://notebook-oose.herokuapp.com/courses/{{courseId}}/notes" />
    <meta property="og:type"          content="Notebook" />
    <meta property="og:title"         content="Your Study Partner" />
    <meta property="og:description"   content="Check out the best class notes available on the internet" />
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script>



    <form id="upvote-form" onsubmit="return validateUpvote()" action="/courses/{{courseId}}/notes/{{noteId}}/upvote" method="post">
        <div class="row mx-auto">
            <input type="hidden" id="noteId" name="noteId" value={{noteId}}>
            <input type="hidden" id="courseId" name="courseId" value={{courseId}}>
            <input type="hidden" id="usernameUpvote" name="usernameUpvote" value="username">
            <button class="btn btn-primary my-2 my-lg-0"  id="upvote">Upvote: {{numberOfUpvotes}}</button>
            <!-- Your share button code -->
            <div class="fb-share-button" style="margin:5px;"
                 data-href="http://notebook-oose.herokuapp.com/courses/{{courseId}}/notes"
                 data-layout="button_count">
            </div>

<!--            <a class="twitter-share-button"-->
<!--               href="https://twitter.com/intent/tweet?url=http://notebook-oose.herokuapp.com/courses/{{courseId}}/notes"-->
<!--               data-size="large">-->
<!--                Tweet</a>-->
            <div style="margin-top:9px;">
                <a href="https://twitter.com/share?ref_src=twsrc%5Etfw&url=http://notebook-oose.herokuapp.com/courses/{{courseId}}/notes"
                   class="twitter-share-button" data-show-count="false">Tweet</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>
        </div>
    </form>

    {{#showPDF}}
    <div class="embed-responsive embed-responsive-4by3">
        <embed id="note-content-pdf" class="embed-responsive-item" src="{{ filepath }}">
    </div>
    {{/showPDF}}
    {{#showHTML}}
        <script src="/js/noteContent.js"></script>
        <div class="embed-responsive embed-responsive-4by3">
            <iframe id="note-content" class="embed-responsive-item" src="{{ filepath }}" onload="insertNoteCss();"></iframe>
        </div>
    {{/showHTML}}

    {{^showContent}}
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1024px-PDF_file_icon.svg.png", height="200px">
    {{/showContent}}
    <h3 class="section-title"> Comments </h3>
    <ul class="list-group">
        {{#commentList}}
            <li class="comment" id="comment{{ id }}">
                <p class="comment-author" id="creator-of-comment-{{id}}">{{creator}} </p>
                <p class="replying-to">{{ parentId }}</p>
                <div class="col mx-auto">
                    <p class="comment-text">{{ text }}</p>
                </div>
                <button onclick="setReplyId({{id}})" class="btn btn-outline-primary btn-reply">Reply</button>
            </li>
        {{/commentList}}
        <script src="/js/populateReplyingTo.js"></script>
    </ul>
    <h3 class="section-title">Add a comment:</h3>
    <div class="form-group">
        <form id="comment-form" onsubmit="return validateComment()" action="/courses/{{courseId}}/notes/{{noteId}}/comment" method="post">
            <input type="hidden" id="reply-id-field" name="parent-id" value="0">
            <input type="hidden" id="username-field" name="username" value="0">
            <textarea class="form-control comment-text-field" id="comment-field" name="text"
                  placeholder="Add a comment..."></textarea>
            <button class="btn btn-primary" id="submit">Submit</button>
        </form>
    </div>
</div>

</main>
</body>

</html>
