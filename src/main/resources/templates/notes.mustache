<!doctype html>
<html>
<head>
    <title>NoteBook</title>
    {{> header}}

    <link href="/css/simple-sidebar.css" rel="stylesheet">
</head>
<body>
<main>
{{> navbar}}

<div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <div class="bg-light border-right" id="sidebar-wrapper">
        <div class="sidebar-heading">{{ courseName }}
        <form class="form-inline my-2 my-lg-0" action="/courses/{{courseId}}/addNote">
            <button class="btn btn-outline-primary my-2 my-sm-0"
                    type="submit" id="submit">Add Note</button>
        </form>
        </div>
        <div class="dropdown show mx-auto sidebar-heading">
            <form class="form-inline my-2 my-lg-0" action="/search/notes">
                <input class="form-control" name="search-notes" type="text" placeholder="Search Notes">
            </form>
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                     Sort By
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="#">Popularity</a>
                <a class="dropdown-item" href="#">Date</a>
                <a class="dropdown-item" href="#">Relevance</a>
            </div>
        </div>
        <div class="list-group list-group-flush" id="note-list">
            {{#noteList}}
                <a data-courseId="{{courseId}}" data-noteId="{{id}}" class="note-select list-group-item list-group-item-action">{{ title }} by {{ creator }}</a>
            {{/noteList}}
        </div>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid" id="note-frame-container">
            <iframe id="note-frame" src=""></iframe>
        </div>
    </div>
    <!-- /#page-content-wrapper -->

</div>

<style>
    #note-frame-container {
        height: 100%;
    }
    #note-frame {
        border: none;
        width: 100%;
        height: 100%;
    }
</style>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script>
$(function(){
    $(".note-select").click(function(e) {
        $('#note-list .active').removeClass('active');
        $(this).addClass('active');

        e.preventDefault();
        $("#note-frame").attr("src", "".concat("/courses/", e.target.dataset.courseid, "/notes-preview/", e.target.dataset.noteid));
    });
});
</script>

<!-- optional script if we want to make the sidebar toggleable -->
<!--<script>-->
<!--    $("#menu-toggle").click(function(e) {-->
<!--        e.preventDefault();-->
<!--        $("#wrapper").toggleClass("toggled");-->
<!--    });-->
<!--</script>-->

</main>
{{> footer}}

</body>
</html>